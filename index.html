<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Terminal del Amor - Para mi canelita üñ§</title>
<style>
  * { box-sizing: border-box; }
  body {
    margin: 0; padding: 0;
    background: #000;
    color: #ff69b4;
    font-family: 'Courier New', monospace;
    overflow-y: auto;
    height: 100vh;
    display: flex;
    flex-direction: column;
    align-items: center;
  }
  h1.typewriter {
    font-size: 1.8rem;
    margin-top: 1rem;
    white-space: nowrap;
    border-right: 0.15em solid #ff69b4;
    animation: typing 4s steps(40, end), blink 0.75s step-end infinite;
  }
  @keyframes typing { from { width: 0 } to { width: 100% } }
  @keyframes blink { 50% { border-color: transparent } }

  #contenedor {
    display: flex;
    flex-direction: column;
    align-items: center;
    margin-top: 2rem;
    max-width: 900px;
    width: 90vw;
    position: relative; /* para capas internas */
    z-index: 10; /* encima de la nube */
  }

  #botones {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 1rem;
    margin-bottom: 2rem;
  }
  button {
    background: #ff69b4;
    color: #000;
    border: none;
    padding: 0.6rem 1.5rem;
    font-weight: bold;
    font-family: monospace;
    font-size: 1.1rem;
    border-radius: 6px;
    cursor: pointer;
    transition: background 0.3s ease;
  }
  button:hover {
    background: #ff85c1;
  }

  #ventanas {
    width: 100%;
    max-width: 700px;
  }
  .ventana {
    background: #111;
    border: 2px solid #ff69b4;
    border-radius: 10px;
    padding: 1rem 1.5rem;
    margin-bottom: 1rem;
    display: none;
    color: #ff69b4;
    font-size: 1.15rem;
    line-height: 1.5;
    position: relative;
    z-index: 10; /* encima de la nube */
    max-height: 60vh;
    overflow-y: auto;
  }
  .ventana p {
    margin: 0.5rem 0;
  }
  .cerrar {
    position: absolute;
    top: 8px;
    right: 10px;
    background: transparent;
    border: none;
    color: #ff69b4;
    font-size: 1.3rem;
    font-weight: bold;
    cursor: pointer;
  }
  .cerrar:hover {
    color: #fff;
  }

  /* Nube de palabras */
  #nubePalabras {
    position: fixed;
    top: 0; left: 0;
    width: 100vw;
    height: 100vh;
    pointer-events: none; /* que no interfiera */
    z-index: 0; /* detr√°s de todo */
    overflow: visible;
  }
  #nubePalabras span {
    position: absolute;
    color: #ff69b4;
    font-family: monospace;
    user-select: none;
    white-space: nowrap;
    opacity: 0.3;
    transition: opacity 0.3s ease;
  }
  #nubePalabras span:hover {
    opacity: 1;
    color: #fff;
    font-weight: bold;
  }

  #lluviaCorazonesCanvas {
    position: fixed;
    top: 0; left: 0;
    width: 100vw;
    height: 100vh;
    pointer-events: none;
    z-index: 0; /* mismo nivel que nube */
  }

  #audioContainer {
    margin-top: 1rem;
    text-align: center;
    position: relative;
    z-index: 10;
  }
  #controlVolumen {
    margin-left: 0.5rem;
  }

  #contador {
    margin-top: 1rem;
    font-size: 1.2rem;
    font-weight: bold;
    position: relative;
    z-index: 10;
  }

  @media (max-width: 600px) {
    h1.typewriter {
      font-size: 1.3rem;
      white-space: normal;
      border-right: none;
      padding: 0 1rem;
    }

    #contenedor {
      width: 95vw;
      margin-top: 1rem;
    }

    #botones {
      flex-direction: column;
      gap: 0.8rem;
      margin-bottom: 1rem;
      padding: 0 1rem;
    }

    button {
      font-size: 1rem;
      padding: 0.5rem 1rem;
      width: 100%;
      max-width: 400px;
      box-sizing: border-box;
    }

    #ventanas {
      max-width: 100%;
      padding: 0 1rem;
    }

    .ventana {
      font-size: 1rem;
      max-height: 45vh;
      padding: 1rem;
    }

    #audioContainer {
      padding: 0 1rem;
    }

    #contador {
      font-size: 1rem;
      padding: 0 1rem;
      margin-top: 0.5rem;
    }
  }
</style>
</head>
<body>

  <h1 class="typewriter" aria-label="Terminal de amor">
    ceo@juliana:~$ echo "Te amo, mi canelita"
  </h1>

  <div id="contenedor">
    <div id="botones" role="navigation" aria-label="Men√∫ de mensajes">
      <button aria-controls="mensaje1" aria-expanded="false" onclick="toggleVentana('mensaje1', this)">Mensaje secreto üíå</button>
      <button aria-controls="mensaje2" aria-expanded="false" onclick="toggleVentana('mensaje2', this)">Poema dedicado üìù</button>
      <button aria-controls="mensaje3" aria-expanded="false" onclick="toggleVentana('mensaje3', this)">Modo m√°gico üåå</button>
      <button aria-controls="mensaje4" aria-expanded="false" onclick="toggleVentana('mensaje4', this)">Confeti rosa üéâ</button>
      <button onclick="enviarBeso()">Enviar beso üíã</button>
    </div>

    <div id="ventanas" role="region" aria-live="polite" aria-label="Ventanas de mensajes">
      <section id="mensaje1" class="ventana" role="dialog" aria-modal="false" aria-labelledby="mensaje1Title" tabindex="-1">
        <button class="cerrar" aria-label="Cerrar mensaje secreto" onclick="cerrarVentana('mensaje1')">&times;</button>
        <h2 id="mensaje1Title">Mensaje secreto üíå</h2>
        <p>No importa cu√°ntos loops de la vida pasen, siempre har√© return contigo. ü•∫</p>
        <p>Incluso si el universo hace un rollback, yo volver√≠a a encontrarte, mi canelita. ‚ù§Ô∏è‚Äçüî•</p>
      </section>

      <section id="mensaje2" class="ventana" role="dialog" aria-modal="false" aria-labelledby="mensaje2Title" tabindex="-1">
        <button class="cerrar" aria-label="Cerrar poema" onclick="cerrarVentana('mensaje2')">&times;</button>
        <h2 id="mensaje2Title">Poema dedicado üìù</h2>
        <p>
          En cada push y commit de nuestro amor,<br/>
          la historia se escribe sin error.<br/>
          Tus ojos son mi mejor funci√≥n,<br/>
          y tus abrazos mi mejor condici√≥n.<br/><br/>

          Mi canelita, luz que me gu√≠a,<br/>
          en el c√≥digo de mi d√≠a.<br/>
          Cada l√≠nea que pienso en ti,<br/>
          es un bucle infinito de sentir.<br/><br/>

          Juntos depuramos la tristeza,<br/>
          con cada risa, con cada pieza.<br/>
          Nuestra rama crece sin cesar,<br/>
          en el repositorio del amar.<br/><br/>

          As√≠, mi amor, en este mundo virtual,<br/>
          eres mi commit m√°s especial.<br/>
          Te amo m√°s all√° del bit,<br/>
          mi canelita, mi c√≥digo, mi hit.<br/><br/>

          Nuestro amor es un bucle eterno,<br/>
          sin break ni fin, siempre tierno.<br/>
          Cada d√≠a un nuevo push de pasi√≥n,<br/>
          construyendo nuestra conexi√≥n.<br/><br/>

          Eres la variable que da sentido,<br/>
          en este programa compartido.<br/>
          Tus ojos, el debugger de mi alma,<br/>
          que me gu√≠a y me calma.<br/><br/>

          En el IDE de mi coraz√≥n,<br/>
          eres la funci√≥n, la condici√≥n.<br/>
          Sin ti, mi c√≥digo no compila,<br/>
          contigo, la vida brilla.<br/><br/>

          Cada commit es una promesa,<br/>
          de amor puro y sin pereza.<br/>
          En nuestra rama, s√≥lo hay luz,<br/>
          porque contigo todo es plus.<br/><br/>

          En el repositorio de mis sue√±os,<br/>
          t√∫ eres el branch sin due√±os.<br/>
          Mi canelita, mi gran inspiraci√≥n,<br/>
          eres el core de mi creaci√≥n.<br/><br/>

          As√≠, seguimos programando,<br/>
          con amor siempre actualizando.<br/>
          Sin bugs, sin errores, s√≥lo ternura,<br/>
          una relaci√≥n llena de pura hermosura.<br/><br/>

          Nuestro deploy es el destino,<br/>
          con cada beso, un nuevo camino.<br/>
          En este servidor llamado vida,<br/>
          t√∫ eres mi mejor salida.<br/><br/>

          Con cada push, con cada merge,<br/>
          nuestro amor nunca se pierde.<br/>
          Eres mi c√≥digo limpio y claro,<br/>
          mi canelita, mi raro amparo.<br/><br/>

          No hay rollback que nos destruya,<br/>
          ni virus que nos destruya.<br/>
          Somos un sistema robusto y fuerte,<br/>
          juntos hasta la muerte.<br/><br/>

          En la terminal de mi alma,<br/>
          t√∫ eres la l√≠nea que calma.<br/>
          Mi canelita, mi bug perfecto,<br/>
          mi amor en c√≥digo correcto.<br/><br/>

          Y as√≠ seguimos codificando,<br/>
          nuestro amor eternizando.<br/>
          Porque en este mundo virtual,<br/>
          t√∫ eres mi vida real.<br/><br/>

          Te amo m√°s all√° del pixel,<br/>
          m√°s all√° del click y del switchel.<br/>
          Mi canelita, mi eterna funci√≥n,<br/>
          mi c√≥digo y mi canci√≥n.<br/><br/>

          Eres la l√≥gica que me envuelve,<br/>
          el algoritmo que me resuelve.<br/>
          Mi coraz√≥n es un array,<br/>
          donde t√∫ siempre est√°s.<br/><br/>

          No importa el lenguaje o la plataforma,<br/>
          contigo siempre hay una norma.<br/>
          De amor puro y sincero,<br/>
          contigo siempre me quiero.<br/><br/>

          As√≠ que en esta l√≠nea final,<br/>
          te dejo este poema especial.<br/>
          Mi canelita, mi amor sincero,<br/>
          mi c√≥digo verdadero.<br/><br/>
        </p>
      </section>

      <section id="mensaje3" class="ventana" role="dialog" aria-modal="false" aria-labelledby="mensaje3Title" tabindex="-1">
        <button class="cerrar" aria-label="Cerrar modo m√°gico" onclick="cerrarVentana('mensaje3')">&times;</button>
        <h2 id="mensaje3Title">Modo m√°gico üåå</h2>
        <p id="mensajeMagico" style="margin-bottom: 1rem; font-style: italic; font-weight: bold;"></p>
        <audio id="vozMagica" src="https://files.catbox.moe/pdjk7n.mp3" preload="auto"></audio>
      </section>

      <section id="mensaje4" class="ventana" role="dialog" aria-modal="false" aria-labelledby="mensaje4Title" tabindex="-1">
        <button class="cerrar" aria-label="Cerrar confeti rosa" onclick="cerrarVentana('mensaje4')">&times;</button>
        <h2 id="mensaje4Title">Confeti rosa üéâ</h2>
        <p>Activa o desactiva el confeti rosa para celebrar nuestro amor sin fin.</p>
        <button id="btnConfeti" onclick="toggleConfeti()">üéä Activar/Desactivar Confeti</button>
      </section>
    </div>
  </div>

  <div id="nubePalabras" aria-hidden="true"></div>
  <canvas id="lluviaCorazonesCanvas" aria-hidden="true"></canvas>

  <div id="audioContainer" aria-label="Control de audio">
    <audio id="audioFondo" controls autoplay loop>
      <source src="https://files.catbox.moe/u79a63.mp3" type="audio/mpeg" />
      Tu navegador no soporta el audio :(
    </audio>
    <label for="controlVolumen">Volumen:</label>
    <input id="controlVolumen" type="range" min="0" max="1" step="0.01" value="0.6" />
  </div>

  <div id="contador" aria-live="polite" aria-atomic="true"></div>

<script>
  // Ventanas: solo una abierta a la vez
  function toggleVentana(id, boton) {
    const ventanas = document.querySelectorAll(".ventana");
    ventanas.forEach(v => {
      if (v.id === id) {
        if (v.style.display === "block") {
          v.style.display = "none";
          boton.setAttribute("aria-expanded", "false");
        } else {
          v.style.display = "block";
          boton.setAttribute("aria-expanded", "true");
          v.focus();
          if(id === "mensaje3") activarMagia();
        }
      } else {
        v.style.display = "none";
        const b = document.querySelector(`#botones button[aria-controls="${v.id}"]`);
        if (b) b.setAttribute("aria-expanded", "false");
      }
    });
  }
  function cerrarVentana(id) {
    const v = document.getElementById(id);
    v.style.display = "none";
    const b = document.querySelector(`#botones button[aria-controls="${id}"]`);
    if (b) b.setAttribute("aria-expanded", "false");
  }

  // Nube de palabras mejorada, que se mueve en diferentes partes, detr√°s de todo, sin pasar por botones
  const palabras = [
    "canelita", "mi amor", "coraz√≥n", "mi vida", "luz", "mi todo", "mi sol", "mi cielo",
    "ternura", "besos", "abrazos", "mi alegr√≠a", "mi musa", "mi reina", "mi princesa",
    "dulzura", "mi sue√±o", "mi paz", "mi mundo", "mi felicidad", "mi alma",
    "mi estrella", "mi suspiro", "mi sonrisa", "amor infinito", "mi refugio", "mi calma",
    "mi magia", "mi inspiraci√≥n", "mi cari√±o", "mi abrazo", "mi esperanza", "mi raz√≥n",
    "mi vida eterna", "mi universo", "mi fuerza", "mi sol radiante", "mi cielo estrellado",
    "mi mundo perfecto"
  ];
  const nube = document.getElementById("nubePalabras");
  let palabrasDOM = [];

  // Creamos 50 palabras distribuidas en pantalla, con posici√≥n % aleatoria
  function crearNube() {
    nube.innerHTML = "";
    palabrasDOM = [];
    for(let i=0; i<50; i++) {
      const span = document.createElement("span");
      span.classList.add("palabra");
      span.textContent = palabras[Math.floor(Math.random() * palabras.length)];
      span.style.fontSize = (Math.random() * 18 + 12).toFixed(1) + "px";
      span.style.opacity = (Math.random() * 0.4 + 0.3).toFixed(2);
      // Posici√≥n inicial aleatoria, pero no en zona de botones (centro-bottom)
      let x, y;
      do {
        x = Math.random() * 100;
        y = Math.random() * 80; // que no baje mucho para no tapar botones
      } while (x > 30 && x < 70 && y > 60); // evita √°rea botones abajo-centro
      span.style.left = x + "%";
      span.style.top = y + "%";
      nube.appendChild(span);
      palabrasDOM.push({
        el: span,
        x,
        y,
        dx: (Math.random() - 0.5) * 0.07,
        dy: (Math.random() - 0.5) * 0.04,
      });
    }
  }
  crearNube();

  function animarNube() {
    palabrasDOM.forEach(palabra => {
      palabra.x += palabra.dx;
      palabra.y += palabra.dy;
      // Mantener dentro pantalla (0-100)
      if (palabra.x < 0) palabra.x = 100;
      else if (palabra.x > 100) palabra.x = 0;
      if (palabra.y < 0) palabra.y = 80;
      else if (palabra.y > 80) palabra.y = 0;
      palabra.el.style.left = palabra.x + "%";
      palabra.el.style.top = palabra.y + "%";
    });
    requestAnimationFrame(animarNube);
  }
  animarNube();

  // Corazones que caen
  const canvasLluvia = document.getElementById("lluviaCorazonesCanvas");
  const ctxLluvia = canvasLluvia.getContext("2d");
  canvasLluvia.width = window.innerWidth;
  canvasLluvia.height = window.innerHeight;

  let corazones = [];
  const maxCorazones = 30;
  let animacionActiva = false;

  class Corazon {
    constructor() {
      this.x = Math.random() * canvasLluvia.width;
      this.y = -20;
      this.size = Math.random() * 20 + 10;
      this.speed = Math.random() * 2 + 1;
      this.angle = Math.random() * Math.PI * 2;
      this.spinSpeed = (Math.random() - 0.5) * 0.05;
    }
    draw() {
      ctxLluvia.save();
      ctxLluvia.translate(this.x, this.y);
      ctxLluvia.rotate(this.angle);
      ctxLluvia.fillStyle = 'rgba(255,105,180,0.8)';
      ctxLluvia.beginPath();
      ctxLluvia.moveTo(0, 0);
      ctxLluvia.bezierCurveTo(this.size / 2, -this.size / 2, this.size, this.size / 3, 0, this.size);
      ctxLluvia.bezierCurveTo(-this.size, this.size / 3, -this.size / 2, -this.size / 2, 0, 0);
      ctxLluvia.fill();
      ctxLluvia.restore();
    }
    update() {
      this.y += this.speed;
      this.angle += this.spinSpeed;
      if (this.y > canvasLluvia.height + this.size) {
        this.y = -this.size;
        this.x = Math.random() * canvasLluvia.width;
      }
    }
  }

  function iniciarConfeti() {
    if(animacionActiva) return;
    animacionActiva = true;
    for(let i = 0; i < maxCorazones; i++) {
      corazones.push(new Corazon());
    }
    animarConfeti();
  }
  function detenerConfeti() {
    animacionActiva = false;
    corazones = [];
    ctxLluvia.clearRect(0, 0, canvasLluvia.width, canvasLluvia.height);
  }
  function animarConfeti() {
    if(!animacionActiva) return;
    ctxLluvia.clearRect(0, 0, canvasLluvia.width, canvasLluvia.height);
    corazones.forEach(c => {
      c.update();
      c.draw();
    });
    requestAnimationFrame(animarConfeti);
  }
  let confetiActivo = false;
  function toggleConfeti() {
    confetiActivo = !confetiActivo;
    if(confetiActivo) iniciarConfeti();
    else detenerConfeti();
  }

  // Modo m√°gico: escribir texto lento y reproducir audio
  const textoMagico = "Juliana, mi canelita, eres la luz que ilumina mi c√≥digo y la melod√≠a que hace latir mi coraz√≥n. Te amo m√°s all√° de los bits y los bytes, eres mi funci√≥n favorita en este programa llamado vida.";
  let indiceMagico = 0;
  let timeoutMagico;

  function activarMagia() {
    const mensaje = document.getElementById("mensajeMagico");
    const audio = document.getElementById("vozMagica");
    mensaje.textContent = "";
    indiceMagico = 0;
    if (timeoutMagico) clearTimeout(timeoutMagico);
    audio.pause();
    audio.currentTime = 0;
    audio.volume = 0.7;

    function escribir() {
      if (indiceMagico < textoMagico.length) {
        mensaje.textContent += textoMagico.charAt(indiceMagico);
        indiceMagico++;
        timeoutMagico = setTimeout(escribir, 10); // m√°s r√°pido para que no tarde tanto
      } else {
        audio.play();
      }
    }
    escribir();
  }

  // Contador en vivo desde fecha de inicio
  const contador = document.getElementById("contador");
  const fechaInicio = new Date("2023-01-01T00:00:00"); // fecha de ejemplo, cambia a tu fecha especial

  function actualizarContador() {
    const ahora = new Date();
    let diff = ahora - fechaInicio;

    const dias = Math.floor(diff / (1000 * 60 * 60 * 24));
    diff -= dias * (1000 * 60 * 60 * 24);
    const horas = Math.floor(diff / (1000 * 60 * 60));
    diff -= horas * (1000 * 60 * 60);
    const minutos = Math.floor(diff / (1000 * 60));
    diff -= minutos * (1000 * 60);
    const segundos = Math.floor(diff / 1000);

    contador.textContent = `Llevamos juntos ${dias} d√≠as, ${horas} horas, ${minutos} minutos y ${segundos} segundos üíñ`;
  }
  setInterval(actualizarContador, 1000);
  actualizarContador();

  // Audio volumen slider
  const audioFondo = document.getElementById("audioFondo");
  const controlVolumen = document.getElementById("controlVolumen");
  controlVolumen.addEventListener("input", e => {
    audioFondo.volume = e.target.value;
  });

  // Enviar beso animado (simple efecto confeti rosa r√°pido)
  function enviarBeso() {
    if (confetiActivo) {
      alert("El confeti ya est√° activado, amor :)");
      return;
    }
    toggleConfeti();
    setTimeout(() => {
      toggleConfeti();
      alert("Te envi√© un beso con confeti rosa, mi canelita üíã");
    }, 3000);
  }

  // Ajustar canvas tama√±o al cambiar tama√±o ventana
  window.addEventListener("resize", () => {
    canvasLluvia.width = window.innerWidth;
    canvasLluvia.height = window.innerHeight;
  });

</script>

</body>
</html>
